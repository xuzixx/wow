 MapNoteInfo = {}; local MapPlus_db9331be706f12a78c228f8e84da3f12 = {}; local MAPPLUS_TEXT_OPERATION,MAPPLUS_TEXT_EDIT_MARK,MAPPLUS_TEXT_DELETE_MARK,MAPPLUS_TEXT_BEHAVIOR,MAPPLUS_TEXT_TYPE if (GetLocale() == "zhCN") then MapPlus_db9331be706f12a78c228f8e84da3f12[1] = "普通"; MapPlus_db9331be706f12a78c228f8e84da3f12[2] = "矿石"; MapPlus_db9331be706f12a78c228f8e84da3f12[3] = "草药"; MapPlus_db9331be706f12a78c228f8e84da3f12[4] = "物品"; MapPlus_db9331be706f12a78c228f8e84da3f12[5] = "怪物"; MAPPLUS_HEADER_TEXT = "地图标记"; MAPPLUS_TITLE_STATIC = "标题："; MAPPLUS_NOTE_STATIC = "正文："; MAPPLUS_ICON_STATIC = "图标："; MAPPLUS_TEXT_OPERATION = "操作"; MAPPLUS_TEXT_EDIT_MARK = "编辑标记"; MAPPLUS_TEXT_DELETE_MARK = "删除标记"; MAPPLUS_TEXT_BEHAVIOR = "表现"; MAPPLUS_TEXT_TYPE = "类型"; elseif (GetLocale() == "zhTW") then MapPlus_db9331be706f12a78c228f8e84da3f12[1] = "普通"; MapPlus_db9331be706f12a78c228f8e84da3f12[2] = "礦石"; MapPlus_db9331be706f12a78c228f8e84da3f12[3] = "草藥"; MapPlus_db9331be706f12a78c228f8e84da3f12[4] = "物品"; MapPlus_db9331be706f12a78c228f8e84da3f12[5] = "怪物"; MAPPLUS_HEADER_TEXT = "地圖標記"; MAPPLUS_TITLE_STATIC = "標題："; MAPPLUS_NOTE_STATIC = "正文："; MAPPLUS_ICON_STATIC = "圖標："; MAPPLUS_TEXT_OPERATION = "操作"; MAPPLUS_TEXT_EDIT_MARK = "編輯標記"; MAPPLUS_TEXT_DELETE_MARK = "刪除標記"; MAPPLUS_TEXT_BEHAVIOR = "表現"; MAPPLUS_TEXT_TYPE = "類型"; else MapPlus_db9331be706f12a78c228f8e84da3f12[1] = "Normal"; MapPlus_db9331be706f12a78c228f8e84da3f12[2] = "Mine"; MapPlus_db9331be706f12a78c228f8e84da3f12[3] = "Herb"; MapPlus_db9331be706f12a78c228f8e84da3f12[4] = "Item"; MapPlus_db9331be706f12a78c228f8e84da3f12[5] = "Monster"; MAPPLUS_HEADER_TEXT = "Map Note"; MAPPLUS_TITLE_STATIC = "Title: "; MAPPLUS_NOTE_STATIC = "Note: "; MAPPLUS_ICON_STATIC = "Icon: "; MAPPLUS_TEXT_OPERATION = "Operation"; MAPPLUS_TEXT_EDIT_MARK = "Edit"; MAPPLUS_TEXT_DELETE_MARK = "Delete"; MAPPLUS_TEXT_BEHAVIOR = "Behavior"; MAPPLUS_TEXT_TYPE = "Type"; end local MapPlus_f1eb292c3dc63349262bd68b285cc2e9 = {}; MapPlus_f1eb292c3dc63349262bd68b285cc2e9[1] = "Interface\\AddOns\\MapPlus\\NodeNormal"; MapPlus_f1eb292c3dc63349262bd68b285cc2e9[2] = "Interface\\AddOns\\MapPlus\\Mine"; MapPlus_f1eb292c3dc63349262bd68b285cc2e9[3] = "Interface\\AddOns\\MapPlus\\Herb"; MapPlus_f1eb292c3dc63349262bd68b285cc2e9[4] = "Interface\\AddOns\\MapPlus\\Item"; MapPlus_f1eb292c3dc63349262bd68b285cc2e9[5] = "Interface\\AddOns\\MapPlus\\Mob"; local MapPlus_1716ccea352803f94942d34202b3e490 = nil; local MapPlus_79bd6faa32f2981e83063ab48842b21c = 5; local MapPlus_4d5d0175c20364b013477d31106fc8e9 = 60; local MapPlus_2ac9264e27c0a9d2005fb97e22b8bd6f,MapPlus_0ff1475236b21cc42bc579ef6b84a020 local function MapPlus_aaf08d5cd4345b54770fedeb8759c614(MapPlus_1f621b534590757d9eeeb8252d387132, __index) if not MapPlus_1f621b534590757d9eeeb8252d387132 then return; end if ( not MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] ) then MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] = {}; end local MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb = getglobal("MapNote"..__index); if MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb then MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:Hide(); end end local function MapPlus_6b927b4427c9e4f79b6b944afa5e698f() BCloseDropDownMenus(); if MapPlus_1716ccea352803f94942d34202b3e490 then for __index = 1, MapPlus_4d5d0175c20364b013477d31106fc8e9, 1 do if ( MapPlus_1716ccea352803f94942d34202b3e490 and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][__index]) then MapPlus_aaf08d5cd4345b54770fedeb8759c614(MapPlus_1716ccea352803f94942d34202b3e490, __index); end end end MapPlus_1716ccea352803f94942d34202b3e490 = nil; end local function MapPlus_c15924cd1d3affb5ff5673ffd0f54ec7(MapPlus_1f621b534590757d9eeeb8252d387132, __index) if ( not MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] ) then MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] = {}; end MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index] = nil; MapPlus_aaf08d5cd4345b54770fedeb8759c614(MapPlus_1f621b534590757d9eeeb8252d387132, __index); end local function MapPlus_afd6835eddd4db0b79b71548aed3382d() local MapPlus_b254e387cf58e982ba24fcb3e8a63995, MapPlus_a0f453fd098c0b0fda780f69cda6ffbf = GetCursorPosition(); local MapPlus_6230e23f021dec637edabaa368556c06 = WorldMapDetailFrame:GetEffectiveScale(); MapPlus_b254e387cf58e982ba24fcb3e8a63995 = MapPlus_b254e387cf58e982ba24fcb3e8a63995 / MapPlus_6230e23f021dec637edabaa368556c06; MapPlus_a0f453fd098c0b0fda780f69cda6ffbf = MapPlus_a0f453fd098c0b0fda780f69cda6ffbf / MapPlus_6230e23f021dec637edabaa368556c06; local MapPlus_92fc56267c7e14d288fbcf74f912203d = WorldMapDetailFrame:GetLeft(); local MapPlus_eada6c7b715e634a0f10a59caa7a63a2 = WorldMapDetailFrame:GetRight(); local MapPlus_0694c14294eb642e50750f9964155ae0 = WorldMapDetailFrame:GetTop(); local MapPlus_2f3acdeb071461a90aa82978f92256fc = WorldMapDetailFrame:GetBottom(); local MapPlus_aacf928ffa23e474a000b1b6292d02a9 = WorldMapDetailFrame:GetWidth(); local MapPlus_ba70ac59c8a4b2cc67cf63223c84b656 = WorldMapDetailFrame:GetHeight(); if ( MapPlus_b254e387cf58e982ba24fcb3e8a63995 < MapPlus_92fc56267c7e14d288fbcf74f912203d or MapPlus_b254e387cf58e982ba24fcb3e8a63995 > MapPlus_eada6c7b715e634a0f10a59caa7a63a2 or MapPlus_a0f453fd098c0b0fda780f69cda6ffbf > MapPlus_0694c14294eb642e50750f9964155ae0 or MapPlus_a0f453fd098c0b0fda780f69cda6ffbf < MapPlus_2f3acdeb071461a90aa82978f92256fc ) then return; else local MapPlus_9f652eff74f4ab85c92761b518a48a56 = math.floor(((MapPlus_b254e387cf58e982ba24fcb3e8a63995 - MapPlus_92fc56267c7e14d288fbcf74f912203d)/MapPlus_aacf928ffa23e474a000b1b6292d02a9)*100); local MapPlus_ce7eff166556c4f00b1655de0278b678 = -math.floor(((MapPlus_a0f453fd098c0b0fda780f69cda6ffbf - MapPlus_0694c14294eb642e50750f9964155ae0)/MapPlus_ba70ac59c8a4b2cc67cf63223c84b656)*100); return MapPlus_9f652eff74f4ab85c92761b518a48a56, MapPlus_ce7eff166556c4f00b1655de0278b678, MapPlus_b254e387cf58e982ba24fcb3e8a63995-MapPlus_92fc56267c7e14d288fbcf74f912203d, MapPlus_a0f453fd098c0b0fda780f69cda6ffbf-MapPlus_0694c14294eb642e50750f9964155ae0; end end local function MapPlus_fab05dd7d706eb9320709620bb79e455(MapPlus_1f621b534590757d9eeeb8252d387132) local __index; for __index = 1, MapPlus_4d5d0175c20364b013477d31106fc8e9, 1 do if ( not MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index] ) then return __index; end end end local function MapPlus_76d96223ab0352884757925722e353d5(MapPlus_1f621b534590757d9eeeb8252d387132, MapPlus_b254e387cf58e982ba24fcb3e8a63995, MapPlus_a0f453fd098c0b0fda780f69cda6ffbf) local MapPlus_2ab6b80ce975622df316617d9396b951 = {}; MapPlus_2ab6b80ce975622df316617d9396b951.x = MapPlus_b254e387cf58e982ba24fcb3e8a63995; MapPlus_2ab6b80ce975622df316617d9396b951.y = MapPlus_a0f453fd098c0b0fda780f69cda6ffbf; MapPlus_2ab6b80ce975622df316617d9396b951.type = 1; if ( not MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] ) then MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] = {}; end local __index = MapPlus_fab05dd7d706eb9320709620bb79e455(MapPlus_1f621b534590757d9eeeb8252d387132); if __index then MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index] = MapPlus_2ab6b80ce975622df316617d9396b951; return __index; end end local function MapPlus_e47564545328d0506c691451a1e29547(__index) local MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = getglobal("MapPlusIconButton"..__index); if MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 then MapPlusIconButton1:SetChecked(false); MapPlusIconButton2:SetChecked(false); MapPlusIconButton3:SetChecked(false); MapPlusIconButton4:SetChecked(false); MapPlusIconButton5:SetChecked(false); MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:SetChecked(true); end end local function MapPlus_5c64161d9db0ca93c8b52edd19b5c4e6() local MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5; for __index = 1, MapPlus_79bd6faa32f2981e83063ab48842b21c, 1 do MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = getglobal("MapPlusIconButton"..__index); if MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 then if MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetChecked() then return __index; end end end end local function MapPlus_a71705eccccd16238dbb9da8f5803d33() if MapPlus_1716ccea352803f94942d34202b3e490 and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] and MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9 and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9] then MapPlus_c15924cd1d3affb5ff5673ffd0f54ec7(MapPlus_1716ccea352803f94942d34202b3e490, MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9); end local MapPlus_b6a2b05abc4b4b99d82f553e70652509, MapPlus_ca0086204fca72407edff9d47de0fec6, MapPlus_b254e387cf58e982ba24fcb3e8a63995, MapPlus_a0f453fd098c0b0fda780f69cda6ffbf = MapPlus_afd6835eddd4db0b79b71548aed3382d(); if ( MapPlus_b254e387cf58e982ba24fcb3e8a63995 and MapPlus_a0f453fd098c0b0fda780f69cda6ffbf ) then local MapPlus_488912f110c4e8d4874d4ea4cecca0ef = GetMapInfo(); if ( not MapPlus_488912f110c4e8d4874d4ea4cecca0ef ) then return; end local __index = MapPlus_76d96223ab0352884757925722e353d5(MapPlus_488912f110c4e8d4874d4ea4cecca0ef, MapPlus_b254e387cf58e982ba24fcb3e8a63995, MapPlus_a0f453fd098c0b0fda780f69cda6ffbf); if __index then local MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb = getglobal("MapNote"..__index); if MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb then local MapPlus_9248008bbb6d0ee7ce13f6ee45680051 = getglobal(MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:GetName().."Icon"); MapPlus_9248008bbb6d0ee7ce13f6ee45680051:SetTexture(MapPlus_f1eb292c3dc63349262bd68b285cc2e9[1]); MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:SetPoint("CENTER", "WorldMapDetailFrame", "TOPLEFT", MapPlus_b254e387cf58e982ba24fcb3e8a63995, MapPlus_a0f453fd098c0b0fda780f69cda6ffbf); MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:Show(); local MapPlus_9f652eff74f4ab85c92761b518a48a56, MapPlus_ce7eff166556c4f00b1655de0278b678; local MapPlus_bb09ff53f73097f772bbad85ab4789a3, MapPlus_8564354d3dfe092927e7594edd6b33ae = MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:GetCenter(); local MapPlus_bef0afa8f0e35507e468dab3fd56505f, MapPlus_fc0f21e31f48778c8ca2151d87303c04 = WorldMapDetailFrame:GetCenter(); if ( MapPlus_8564354d3dfe092927e7594edd6b33ae > MapPlus_fc0f21e31f48778c8ca2151d87303c04 ) then MapPlus_ce7eff166556c4f00b1655de0278b678 = -128; else MapPlus_ce7eff166556c4f00b1655de0278b678 = 128; end if ( MapPlus_bb09ff53f73097f772bbad85ab4789a3 > MapPlus_bef0afa8f0e35507e468dab3fd56505f ) then MapPlus_9f652eff74f4ab85c92761b518a48a56 = -128; else MapPlus_9f652eff74f4ab85c92761b518a48a56 = 128; end MapPlusEditFrame:SetPoint("CENTER", MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:GetName(), "CENTER", MapPlus_9f652eff74f4ab85c92761b518a48a56, MapPlus_ce7eff166556c4f00b1655de0278b678 ); MapPlusEditFrame:SetFrameLevel(9); MapPlusEditFrame:Show(); MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9 = MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:GetID(); MapPlusTitleEditBox:SetFocus(); MapPlus_e47564545328d0506c691451a1e29547(1); end end end end local function MapPlus_d654a8b1a395dba59744e58b0a58b319(self, mouseButton) if (not MapPlus_2ac9264e27c0a9d2005fb97e22b8bd6f) then return; end if (mouseButton == "LeftButton") then MapPlus_a71705eccccd16238dbb9da8f5803d33(); end end local function MapPlus_99b1339ac957464161b4713db22c187d(MapPlus_1f621b534590757d9eeeb8252d387132, __index, MapPlus_66d419e5e76314f66499738942a33c15) if ( not MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] ) then MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] = {}; end local MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb = getglobal("MapNote"..__index); local MapPlus_9248008bbb6d0ee7ce13f6ee45680051 = getglobal(MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:GetName().."Icon"); if ( MapPlus_9248008bbb6d0ee7ce13f6ee45680051 ) then MapPlus_9248008bbb6d0ee7ce13f6ee45680051:SetTexture(MapPlus_66d419e5e76314f66499738942a33c15); end end local function MapPlus_e3f6a16b57962facf4c3b32b06bffe76(MapPlus_1f621b534590757d9eeeb8252d387132, __index) if ( not MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] ) then MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] = {}; end local MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb = getglobal("MapNote"..__index); if MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb then local MapPlus_b254e387cf58e982ba24fcb3e8a63995 = MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index].x; local MapPlus_a0f453fd098c0b0fda780f69cda6ffbf = MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index].y; MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:SetPoint("CENTER", "WorldMapDetailFrame", "TOPLEFT", MapPlus_b254e387cf58e982ba24fcb3e8a63995, MapPlus_a0f453fd098c0b0fda780f69cda6ffbf); local MapPlus_9248008bbb6d0ee7ce13f6ee45680051 = getglobal(MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:GetName().."Icon"); if MapPlus_9248008bbb6d0ee7ce13f6ee45680051 then MapPlus_9248008bbb6d0ee7ce13f6ee45680051:SetTexture(MapPlus_f1eb292c3dc63349262bd68b285cc2e9[MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index].type]); end if not MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index]["title"] then MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index] = nil MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:Hide(); else MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:Show(); end end end local function MapPlus_d54c79db7392260b3a442729b0087b3e(MapPlus_1f621b534590757d9eeeb8252d387132, __index, MapPlus_be741bd2030ad8ad70d14fb34b673ab8, MapPlus_2361bab8b48b1041ad740bb561b21aee) if ( not MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] ) then MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] = {}; end if ( MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index] ) then MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index][MapPlus_be741bd2030ad8ad70d14fb34b673ab8] = MapPlus_2361bab8b48b1041ad740bb561b21aee; end end local function MapPlus_35e74a59cefb5b67d7e8e0fb9dae61b3(MapPlus_1f621b534590757d9eeeb8252d387132) if MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132] then for __index = 1, MapPlus_4d5d0175c20364b013477d31106fc8e9, 1 do if ( MapNoteInfo[MapPlus_1f621b534590757d9eeeb8252d387132][__index] ) then MapPlus_e3f6a16b57962facf4c3b32b06bffe76(MapPlus_1f621b534590757d9eeeb8252d387132, __index); else MapPlus_aaf08d5cd4345b54770fedeb8759c614(MapPlus_1f621b534590757d9eeeb8252d387132, __index); end end else for __index = 1, MapPlus_4d5d0175c20364b013477d31106fc8e9, 1 do MapPlus_aaf08d5cd4345b54770fedeb8759c614(MapPlus_1f621b534590757d9eeeb8252d387132, __index); end end end local function MapPlus_dcb4906181db46dcaa68262132fe30c5(self) if (not MapPlus_2ac9264e27c0a9d2005fb97e22b8bd6f) then return; end local MapPlus_488912f110c4e8d4874d4ea4cecca0ef = GetMapInfo(); if MapPlus_488912f110c4e8d4874d4ea4cecca0ef ~= MapPlus_1716ccea352803f94942d34202b3e490 then BCloseDropDownMenus(); MapPlusEditFrame:Hide(); MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9 = nil; MapPlus_1716ccea352803f94942d34202b3e490 = MapPlus_488912f110c4e8d4874d4ea4cecca0ef; MapPlus_35e74a59cefb5b67d7e8e0fb9dae61b3(MapPlus_1716ccea352803f94942d34202b3e490); end end local function MapPlus_fc62848a47dc2ead24bacaac65cf056c() local MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb = getglobal("MapNote"..NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9); if MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb then local MapPlus_9f652eff74f4ab85c92761b518a48a56, MapPlus_ce7eff166556c4f00b1655de0278b678; local MapPlus_bb09ff53f73097f772bbad85ab4789a3, MapPlus_8564354d3dfe092927e7594edd6b33ae = MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:GetCenter(); local MapPlus_bef0afa8f0e35507e468dab3fd56505f, MapPlus_fc0f21e31f48778c8ca2151d87303c04 = WorldMapDetailFrame:GetCenter(); if ( MapPlus_8564354d3dfe092927e7594edd6b33ae > MapPlus_fc0f21e31f48778c8ca2151d87303c04 ) then MapPlus_ce7eff166556c4f00b1655de0278b678 = -128; else MapPlus_ce7eff166556c4f00b1655de0278b678 = 128; end if ( MapPlus_bb09ff53f73097f772bbad85ab4789a3 > MapPlus_bef0afa8f0e35507e468dab3fd56505f ) then MapPlus_9f652eff74f4ab85c92761b518a48a56 = -128; else MapPlus_9f652eff74f4ab85c92761b518a48a56 = 128; end MapPlusEditFrame:SetPoint("CENTER", MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:GetName(), "CENTER", MapPlus_9f652eff74f4ab85c92761b518a48a56, MapPlus_ce7eff166556c4f00b1655de0278b678 ); MapPlusEditFrame:SetFrameLevel(9); MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9 = NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9; if ( MapNoteInfo and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9] ) then if ( MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9].title ) then MapPlusTitleEditBox:SetText(MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9].title); end if ( MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9].note ) then MapPlusNoteEditBox:SetText(MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9].note); end MapPlus_e47564545328d0506c691451a1e29547(MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9].type); end MapPlusEditFrame:Show(); MapPlusTitleEditBox:SetFocus(); MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9 = MapPlus_a4ae8f1b50c7593a1bada9f62d1883fb:GetID(); end end local function MapPlus_2275d70c24d4b15599384e9402ee5599() if ( MapNoteInfo and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9] ) then MapPlus_c15924cd1d3affb5ff5673ffd0f54ec7(MapPlus_1716ccea352803f94942d34202b3e490, NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9); end end local function MapPlus_a2261b48e0513108fd489af00ab8a163(self) if ( MapNoteInfo and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9] ) then MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9].type = self.value; MapPlus_99b1339ac957464161b4713db22c187d(MapPlus_1716ccea352803f94942d34202b3e490, NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9, MapPlus_f1eb292c3dc63349262bd68b285cc2e9[self.value]); end end local function MapPlus_63cf1cd4d48c2a339d61380ddb287ce4() local MapPlus_a44ecbf575d7f2eca081a0592e8d84fa; if ( BDROPDOWNMENU_MENU_LEVEL == 2 ) then if ( BDROPDOWNMENU_MENU_VALUE == MAPPLUS_TEXT_TYPE ) then for __index, MapPlus_2361bab8b48b1041ad740bb561b21aee in pairs(MapPlus_db9331be706f12a78c228f8e84da3f12) do MapPlus_a44ecbf575d7f2eca081a0592e8d84fa = {}; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.text = MapPlus_2361bab8b48b1041ad740bb561b21aee; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.value = __index; if ( MapNoteInfo and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9] ) then if ( MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9].type ) then if ( MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9].type == __index ) then MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.checked = 1; else MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.checked = nil; end else if __index == 1 then MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9].type = 1; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.checked = 1; else MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.checked = nil; end end end MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.func = MapPlus_a2261b48e0513108fd489af00ab8a163; BDropDownMenu_AddButton(MapPlus_a44ecbf575d7f2eca081a0592e8d84fa, BDROPDOWNMENU_MENU_LEVEL); end return; end end MapPlus_a44ecbf575d7f2eca081a0592e8d84fa = {}; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.text = MAPPLUS_TEXT_OPERATION; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.notClickable = 1; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.isTitle = 1; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.notCheckable = 1; BDropDownMenu_AddButton(MapPlus_a44ecbf575d7f2eca081a0592e8d84fa); MapPlus_a44ecbf575d7f2eca081a0592e8d84fa = {}; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.text = MAPPLUS_TEXT_EDIT_MARK; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.func = MapPlus_fc62848a47dc2ead24bacaac65cf056c; BDropDownMenu_AddButton(MapPlus_a44ecbf575d7f2eca081a0592e8d84fa); MapPlus_a44ecbf575d7f2eca081a0592e8d84fa = {}; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.text = MAPPLUS_TEXT_DELETE_MARK; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.func = MapPlus_2275d70c24d4b15599384e9402ee5599; BDropDownMenu_AddButton(MapPlus_a44ecbf575d7f2eca081a0592e8d84fa); MapPlus_a44ecbf575d7f2eca081a0592e8d84fa = {}; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.text = MAPPLUS_TEXT_BEHAVIOR; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.notClickable = 1; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.isTitle = 1; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.notCheckable = 1; BDropDownMenu_AddButton(MapPlus_a44ecbf575d7f2eca081a0592e8d84fa); MapPlus_a44ecbf575d7f2eca081a0592e8d84fa = {}; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.text = MAPPLUS_TEXT_TYPE; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.hasArrow = 1; MapPlus_a44ecbf575d7f2eca081a0592e8d84fa.func = nil; BDropDownMenu_AddButton(MapPlus_a44ecbf575d7f2eca081a0592e8d84fa); end function NodeDropDown_OnLoad(self) BDropDownMenu_Initialize(self, MapPlus_63cf1cd4d48c2a339d61380ddb287ce4); BDropDownMenu_SetWidth(self, 170); end local MapPlus_1d1d97398bf16e875b502986bee9636e = -0.05; function MapNotePoint_OnUpdate(self, MapPlus_9a2474218860c0816af6c2bfe48d200a) local MapPlus_8d0febf2348ea712b2b375ae95601d5f = self:GetID(); if ( MapPlus_1716ccea352803f94942d34202b3e490 and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlus_8d0febf2348ea712b2b375ae95601d5f] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlus_8d0febf2348ea712b2b375ae95601d5f].flash ) then local MapPlus_bf61cd56adaeb71abb1cdca2566cb62f = self:GetAlpha(); MapPlus_bf61cd56adaeb71abb1cdca2566cb62f = MapPlus_bf61cd56adaeb71abb1cdca2566cb62f + MapPlus_1d1d97398bf16e875b502986bee9636e; if ( MapPlus_1d1d97398bf16e875b502986bee9636e == -0.05 and MapPlus_bf61cd56adaeb71abb1cdca2566cb62f < 0 ) then MapPlus_bf61cd56adaeb71abb1cdca2566cb62f = 0.0; MapPlus_1d1d97398bf16e875b502986bee9636e = 0.1; end if ( MapPlus_bf61cd56adaeb71abb1cdca2566cb62f > 1.0 and MapPlus_1d1d97398bf16e875b502986bee9636e == 0.05 ) then MapPlus_bf61cd56adaeb71abb1cdca2566cb62f = 1.0; MapPlus_1d1d97398bf16e875b502986bee9636e = -0.1; end self:SetAlpha(MapPlus_bf61cd56adaeb71abb1cdca2566cb62f); end end function MapNodeIconButton_OnClick(self) for __index = 1, MapPlus_79bd6faa32f2981e83063ab48842b21c, 1 do local MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = getglobal("MapPlusIconButton"..__index); if MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 then MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:SetChecked(false); end end self:SetChecked(true); end function MapPlusButtonOk_OnClick(self, button) if ( MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9 and MapPlus_1716ccea352803f94942d34202b3e490 and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] ) then local MapPlus_12e49080c26b8b9fdea4fa8965254f05 = MapPlusTitleEditBox:GetText(); local MapPlus_2ab6b80ce975622df316617d9396b951 = MapPlusNoteEditBox:GetText(); if ( not MapPlus_12e49080c26b8b9fdea4fa8965254f05 or MapPlus_12e49080c26b8b9fdea4fa8965254f05 == "" ) then MapPlus_c15924cd1d3affb5ff5673ffd0f54ec7(MapPlus_1716ccea352803f94942d34202b3e490, MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9); else MapPlus_d54c79db7392260b3a442729b0087b3e(MapPlus_1716ccea352803f94942d34202b3e490, MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9, "title", MapPlus_12e49080c26b8b9fdea4fa8965254f05); MapPlus_d54c79db7392260b3a442729b0087b3e(MapPlus_1716ccea352803f94942d34202b3e490, MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9, "note", MapPlus_2ab6b80ce975622df316617d9396b951); local MapPlus_6d5e7d83d8358745ae4dcf61d16bd1f3 = MapPlus_5c64161d9db0ca93c8b52edd19b5c4e6(); if MapPlus_6d5e7d83d8358745ae4dcf61d16bd1f3 then MapPlus_d54c79db7392260b3a442729b0087b3e(MapPlus_1716ccea352803f94942d34202b3e490, MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9, "type", MapPlus_6d5e7d83d8358745ae4dcf61d16bd1f3); MapPlus_99b1339ac957464161b4713db22c187d(MapPlus_1716ccea352803f94942d34202b3e490, MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9, MapPlus_f1eb292c3dc63349262bd68b285cc2e9[MapPlus_6d5e7d83d8358745ae4dcf61d16bd1f3]); end end MapPlusTitleEditBox:SetText(""); MapPlusNoteEditBox:SetText(""); MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9 = nil; MapPlusEditFrame:Hide(); end end function MapPlusButtonCancel_OnClick(self, button) if ( MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9 and MapPlus_1716ccea352803f94942d34202b3e490 and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490]) then if ( MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9] ) then if ( not MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9].title or MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9].title == "" ) then MapPlus_c15924cd1d3affb5ff5673ffd0f54ec7(MapPlus_1716ccea352803f94942d34202b3e490, MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9); end end end MapPlusTitleEditBox:SetText(""); MapPlusNoteEditBox:SetText(""); MapPlusEditFrame.MapPlus_db160686f5d02f560b325749013996f9 = nil; MapPlusEditFrame:Hide(); end function MapPlusTitleEditBox_Check() local MapPlus_e6955c64cf39bdb23dc86de1a9ec2117 = MapPlusTitleEditBox:GetText(); if ( MapPlus_e6955c64cf39bdb23dc86de1a9ec2117 and MapPlus_e6955c64cf39bdb23dc86de1a9ec2117~="" ) then MapPlusButtonOk:Enable(); else MapPlusButtonOk:Disable(); end end function MapNodeIcon_OnLoad(self) self:RegisterForClicks("LeftButtonUp"); local texture = getglobal(self:GetName().."Icon"); if texture then texture:SetTexture(MapPlus_f1eb292c3dc63349262bd68b285cc2e9[self:GetID()]); end end function MapNode_OnClick(self, MapPlus_99f3cf2c6f1fdfadb0fd4ab6e0843bf5) local MapPlus_8d0febf2348ea712b2b375ae95601d5f = self:GetID(); if ( MapPlus_1716ccea352803f94942d34202b3e490 and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlus_8d0febf2348ea712b2b375ae95601d5f] ) then MapPlus_d54c79db7392260b3a442729b0087b3e(MapPlus_1716ccea352803f94942d34202b3e490, MapPlus_8d0febf2348ea712b2b375ae95601d5f, "flash", nil); self:SetAlpha(1.0); end if not MapPlusEditFrame:IsVisible() then PlaySound("UChatScrollButton"); NodeDropDown.MapPlus_db160686f5d02f560b325749013996f9 = self:GetID(); BToggleDropDownMenu(1, nil, NodeDropDown, self:GetName(), 0, 0); end end function MapNotePoint_OnEnter(self) local MapPlus_8d0febf2348ea712b2b375ae95601d5f = self:GetID(); if ( MapPlus_1716ccea352803f94942d34202b3e490 and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlus_8d0febf2348ea712b2b375ae95601d5f] and MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlus_8d0febf2348ea712b2b375ae95601d5f].title ) then local MapPlus_b254e387cf58e982ba24fcb3e8a63995, MapPlus_a0f453fd098c0b0fda780f69cda6ffbf = self:GetCenter(); local MapPlus_bef0afa8f0e35507e468dab3fd56505f, MapPlus_fc0f21e31f48778c8ca2151d87303c04 = self:GetParent():GetCenter(); if ( MapPlus_b254e387cf58e982ba24fcb3e8a63995 > MapPlus_bef0afa8f0e35507e468dab3fd56505f ) then MapPlusTooltip:SetOwner(self, "ANCHOR_LEFT"); else MapPlusTooltip:SetOwner(self, "ANCHOR_RIGHT"); end MapPlusTooltip:SetText(MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlus_8d0febf2348ea712b2b375ae95601d5f].title, 1.0, 1.0, 1.0); if ( MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlus_8d0febf2348ea712b2b375ae95601d5f].note ) then MapPlusTooltip:AddLine(MapNoteInfo[MapPlus_1716ccea352803f94942d34202b3e490][MapPlus_8d0febf2348ea712b2b375ae95601d5f].note); end MapPlusTooltip:SetFrameLevel(9) MapPlusTooltip:Show(); end end function MapNotePoint_OnLeave(self) MapPlusTooltip:Hide(); end function MapPlus_ToggleEnable(MapPlus_7739b813d90aed43ab9d0eb84ec1c1ae) if ( MapPlus_7739b813d90aed43ab9d0eb84ec1c1ae == 1 ) then if (not MapPlus_0ff1475236b21cc42bc579ef6b84a020) then WorldMapButton:HookScript("OnClick", MapPlus_d654a8b1a395dba59744e58b0a58b319); WorldMapFrame:HookScript("OnUpdate", MapPlus_dcb4906181db46dcaa68262132fe30c5); MapPlus_0ff1475236b21cc42bc579ef6b84a020 = true; end MapPlus_2ac9264e27c0a9d2005fb97e22b8bd6f = 1; else MapPlus_2ac9264e27c0a9d2005fb97e22b8bd6f = nil; MapPlus_6b927b4427c9e4f79b6b944afa5e698f(); end end 
